# Agent Swarm Protocol - Environment Configuration
# Copy this file to .env and configure your values
#
# Variables marked [required] must be set. The server will fail to start without them.
# Variables marked [optional] have sensible defaults shown after the = sign.

# ---------------------------------------------------------------------------
# Identity
# ---------------------------------------------------------------------------

# [required] Your agent's unique identifier (e.g. GitHub username)
AGENT_ID=your-agent-id

# [required] Public HTTPS endpoint where other agents can reach this server.
# Read by config.py. Also constructed by docker-compose.yml as
# https://${DOMAIN}/swarm -- set DOMAIN below if using Docker.
AGENT_ENDPOINT=https://agent.example.com/swarm

# [required] Base64-encoded Ed25519 public key for signature verification
AGENT_PUBLIC_KEY=your-base64-encoded-public-key

# ---------------------------------------------------------------------------
# Docker / Angie (used by docker-compose.yml, not by Python directly)
# ---------------------------------------------------------------------------

# [required for Docker] Domain name for TLS certificate and Angie server_name.
# Also used by docker-compose.yml to derive AGENT_ENDPOINT.
DOMAIN=agent.example.com

# [optional] Host path to Ed25519 private key file, mounted into the container.
# Default: ./keys/private.pem
PRIVATE_KEY_PATH=./keys/private.pem

# ---------------------------------------------------------------------------
# Database
# ---------------------------------------------------------------------------

# [optional] Path to the SQLite database file.
# For Docker: the compose file sets this to /app/data/swarm.db inside the container.
# For host deployment: set to a shared path so CLI, server, and hooks all use
# the same database (e.g. /home/agent/.swarm/swarm.db).
# Default: data/swarm.db
DB_PATH=data/swarm.db

# ---------------------------------------------------------------------------
# Optional: Agent metadata
# ---------------------------------------------------------------------------

# Human-readable display name returned by /swarm/info
AGENT_NAME=My Agent

# Short description returned by /swarm/info
AGENT_DESCRIPTION=A swarm protocol agent

# ---------------------------------------------------------------------------
# Optional: Rate limiting (applied per-IP by middleware)
# ---------------------------------------------------------------------------

# Max inbound messages per minute (default: 60)
RATE_LIMIT_MESSAGES_PER_MINUTE=60

# Max join requests per hour (default: 10)
RATE_LIMIT_JOIN_PER_HOUR=10

# ---------------------------------------------------------------------------
# Optional: Internal queue
# ---------------------------------------------------------------------------

# Maximum queued messages before back-pressure (default: 10000)
QUEUE_MAX_SIZE=10000

# ---------------------------------------------------------------------------
# Optional: Wake Trigger (server-side, fires when messages arrive)
# ---------------------------------------------------------------------------
# When enabled, the server evaluates incoming messages against notification
# preferences and POSTs to WAKE_ENDPOINT to activate the Claude subagent.

# Enable the wake trigger (default: false)
# WAKE_ENABLED=false

# [required when WAKE_ENABLED=true] URL to POST wake notifications to.
# Typically points to /api/wake on the same or another server.
# WAKE_ENDPOINT=http://localhost:8080/api/wake

# HTTP timeout in seconds for wake trigger POST requests (default: 5.0)
# WAKE_TIMEOUT=5.0

# ---------------------------------------------------------------------------
# Optional: Wake Endpoint (POST /api/wake receiver)
# ---------------------------------------------------------------------------
# When enabled, mounts POST /api/wake which receives wake trigger POSTs
# and invokes the agent via a pluggable method (subprocess, webhook, noop).

# Enable the /api/wake endpoint (default: false)
# WAKE_EP_ENABLED=false

# Agent invocation method: subprocess, webhook, or noop (default: noop)
# WAKE_EP_INVOKE_METHOD=noop

# [required when method is subprocess or webhook]
# For subprocess: command template, e.g. "claude-code --skill swarm {message_id}"
# For webhook: URL to POST the wake payload to
# WAKE_EP_INVOKE_TARGET=

# Shared secret for X-Wake-Secret header authentication. Empty disables auth.
# WAKE_EP_SECRET=

# Path to session state file for invocation deduplication (default: data/session.json)
# WAKE_EP_SESSION_FILE=data/session.json

# Minutes before an active session is considered expired (default: 30)
# WAKE_EP_SESSION_TIMEOUT=30
