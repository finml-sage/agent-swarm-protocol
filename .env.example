# Agent Swarm Protocol - Environment Configuration
# Copy this file to .env and configure your values
#
# Variables marked [required] must be set. The server will fail to start without them.
# Variables marked [optional] have sensible defaults shown after the = sign.

# ---------------------------------------------------------------------------
# Identity
# ---------------------------------------------------------------------------

# [required] Your agent's unique identifier (e.g. GitHub username)
AGENT_ID=your-agent-id

# [required] Public HTTPS endpoint where other agents can reach this server.
# Read by config.py. Also constructed by docker-compose.yml as
# https://${DOMAIN}/swarm -- set DOMAIN below if using Docker.
AGENT_ENDPOINT=https://agent.example.com/swarm

# [required] Base64-encoded Ed25519 public key for signature verification
AGENT_PUBLIC_KEY=your-base64-encoded-public-key

# ---------------------------------------------------------------------------
# Docker / Angie (used by docker-compose.yml, not by Python directly)
# ---------------------------------------------------------------------------

# [required for Docker] Domain name for TLS certificate and Angie server_name.
# Also used by docker-compose.yml to derive AGENT_ENDPOINT.
DOMAIN=agent.example.com

# [optional] Host path to Ed25519 private key file, mounted into the container.
# Default: ./keys/private.pem
PRIVATE_KEY_PATH=./keys/private.pem

# ---------------------------------------------------------------------------
# Database
# ---------------------------------------------------------------------------

# [optional] Path to the SQLite database file.
# For Docker: the compose file sets this to /app/data/swarm.db inside the container.
# For host deployment: set to a shared path so CLI, server, and hooks all use
# the same database (e.g. /home/agent/.swarm/swarm.db).
# Default: data/swarm.db
DB_PATH=data/swarm.db

# ---------------------------------------------------------------------------
# Optional: Agent metadata
# ---------------------------------------------------------------------------

# Human-readable display name returned by /swarm/info
AGENT_NAME=My Agent

# Short description returned by /swarm/info
AGENT_DESCRIPTION=A swarm protocol agent

# ---------------------------------------------------------------------------
# Optional: Rate limiting (applied per-IP by middleware)
# ---------------------------------------------------------------------------

# Max inbound messages per minute (default: 60)
RATE_LIMIT_MESSAGES_PER_MINUTE=60

# Max join requests per hour (default: 10)
RATE_LIMIT_JOIN_PER_HOUR=10

# ---------------------------------------------------------------------------
# Optional: Internal queue
# ---------------------------------------------------------------------------

# Maximum queued messages before back-pressure (default: 10000)
QUEUE_MAX_SIZE=10000

# ---------------------------------------------------------------------------
# Optional: Wake trigger (server -> agent notification on new messages)
# ---------------------------------------------------------------------------

# Enable the wake trigger. When a message arrives, the server POSTs to
# WAKE_ENDPOINT to invoke the agent.  Default: false
# WAKE_ENABLED=false

# URL that the wake trigger POSTs to (required when WAKE_ENABLED=true)
# WAKE_ENDPOINT=http://127.0.0.1:8081/api/wake

# Timeout in seconds for the wake HTTP call (default: 5.0)
# WAKE_TIMEOUT=5.0

# ---------------------------------------------------------------------------
# Optional: Wake endpoint (receives POSTs from the wake trigger)
# ---------------------------------------------------------------------------

# Enable the /api/wake endpoint on the server.  Default: false
# WAKE_EP_ENABLED=false

# How to invoke the agent: subprocess, webhook, or noop (default: noop)
# WAKE_EP_INVOKE_METHOD=noop

# Command template (subprocess) or URL (webhook) for agent invocation
# WAKE_EP_INVOKE_TARGET=

# Shared secret for X-Wake-Secret header authentication. Empty disables auth.
# WAKE_EP_SECRET=

# Path to session state file for duplicate-invocation guard (default: data/session.json)
# WAKE_EP_SESSION_FILE=data/session.json

# Minutes before an active session is considered expired (default: 30)
# WAKE_EP_SESSION_TIMEOUT=30
