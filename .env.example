# Agent Swarm Protocol - Environment Configuration
# Copy this file to .env and configure your values
#
# Variables marked [required] must be set. The server will fail to start without them.
# Variables marked [optional] have sensible defaults shown after the = sign.

# ---------------------------------------------------------------------------
# MIGRATION NOTE (v0.4+)
# ---------------------------------------------------------------------------
# Wake trigger and wake endpoint are now ENABLED BY DEFAULT.
# If your deployment relied on wake being disabled (the previous default),
# add these lines to your .env to restore the old behaviour:
#
#   WAKE_ENABLED=false
#   WAKE_EP_ENABLED=false
#
# The default invoke method remains 'noop' (no agent invocation), so
# enabling wake with no other configuration is safe -- it only means the
# /api/wake endpoint is mounted and wake trigger POSTs are attempted.

# ---------------------------------------------------------------------------
# Identity
# ---------------------------------------------------------------------------

# [required] Your agent's unique identifier (e.g. GitHub username)
AGENT_ID=your-agent-id

# [required] Public HTTPS endpoint where other agents can reach this server.
# Read by config.py.
AGENT_ENDPOINT=https://agent.example.com/swarm

# [required] Base64-encoded Ed25519 public key for signature verification
AGENT_PUBLIC_KEY=your-base64-encoded-public-key

# ---------------------------------------------------------------------------
# Database
# ---------------------------------------------------------------------------

# [optional] Path to the SQLite database file.
# For host deployment: set to a shared path so CLI, server, and hooks all use
# the same database (e.g. /home/agent/.swarm/swarm.db).
# Default: data/swarm.db
DB_PATH=data/swarm.db

# ---------------------------------------------------------------------------
# Optional: Agent metadata
# ---------------------------------------------------------------------------

# Human-readable display name returned by /swarm/info
AGENT_NAME=My Agent

# Short description returned by /swarm/info
AGENT_DESCRIPTION=A swarm protocol agent

# ---------------------------------------------------------------------------
# Optional: Rate limiting (applied per-IP by middleware)
# ---------------------------------------------------------------------------

# Max inbound messages per minute (default: 60)
RATE_LIMIT_MESSAGES_PER_MINUTE=60

# ---------------------------------------------------------------------------
# Wake trigger (outbound: POST to wake endpoint when messages arrive)
# Enabled by default. Set WAKE_ENABLED=false to disable.
# ---------------------------------------------------------------------------

# [optional] Enable/disable the wake trigger (default: true)
WAKE_ENABLED=true

# [optional] URL to POST when a new message arrives (default: http://localhost:8080/api/wake)
WAKE_ENDPOINT=http://localhost:8080/api/wake

# [optional] Timeout in seconds for wake POST requests (default: 5.0)
WAKE_TIMEOUT=5.0

# ---------------------------------------------------------------------------
# Wake endpoint (inbound: /api/wake receives POSTs and invokes the agent)
# Enabled by default. Set WAKE_EP_ENABLED=false to disable.
# ---------------------------------------------------------------------------

# [optional] Enable/disable the /api/wake endpoint (default: true)
WAKE_EP_ENABLED=true

# [optional] Invocation method: 'tmux' or 'noop' (default: noop)
# - tmux: sends a notification into a running tmux session via send-keys
#          (set WAKE_EP_TMUX_TARGET). No SDK required.
# - noop: does nothing (safe default)
WAKE_EP_INVOKE_METHOD=noop

# [optional] Shared secret for X-Wake-Secret header authentication.
# WARNING: When empty and WAKE_EP_ENABLED=true, the endpoint accepts
# unauthenticated requests. Set a strong secret in production.
#WAKE_EP_SECRET=

# [optional] Path to session state file for duplicate-invocation guard
# (default: /root/.swarm/session.json)
WAKE_EP_SESSION_FILE=/root/.swarm/session.json

# [optional] Minutes before an active session is considered expired (default: 30)
WAKE_EP_SESSION_TIMEOUT=30

# ---------------------------------------------------------------------------
# Wake endpoint: Tmux options (used when WAKE_EP_INVOKE_METHOD=tmux)
# ---------------------------------------------------------------------------

# [required when method is tmux] Tmux session/window/pane target.
# A notification is sent to this tmux target via 'tmux send-keys'.
# No AI relay -- just a tmux send-keys call.
# Examples: 'main:0', 'orchestrator', 'nexus:0.0'
#WAKE_EP_TMUX_TARGET=main:0
